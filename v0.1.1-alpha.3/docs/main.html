<!DOCTYPE html>

<html>
<head>
  <title>main</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="http://strd6.github.io/cdn/parallel/docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    <ul class="sections">
        
        
        <li id="section-1">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="facebook">Facebook</h1>

            </div>
            <div class="content"><pre><code class="lang-coffeescript">
</code></pre>
</div>
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            <div class="content"><pre><code class="lang-coffeescript">module.exports =
  init: (appId, options={}, callback) -&gt;
    options.status ?= <span class="literal">true</span>
    options.xfbml ?= <span class="literal">true</span>
    options.appId = appId

    window.<span class="function"><span class="title">fbAsyncInit</span></span> = -&gt;
      <span class="comment"># init the FB JS SDK</span>
      FB.init options

      <span class="comment"># Additional initialization code such as adding Event Listeners goes here</span>
      callback?(FB)

    <span class="comment"># Attach the fb-root element to the body</span>
    fbRoot = document.createElement <span class="string">"div"</span>
    fbRoot.id = <span class="string">"fb-root"</span>
    document.body.appendChild(fbRoot)

    <span class="comment"># Load the SDK asynchronously</span>
    <span class="keyword">do</span> (d=document, s=<span class="string">'script'</span>, id=<span class="string">'facebook-jssdk'</span>, js=<span class="literal">undefined</span>) -&gt;
       fjs = d.getElementsByTagName(s)[<span class="number">0</span>]
       <span class="keyword">return</span> <span class="keyword">if</span> d.getElementById(id)
       js = d.createElement(s)
       js.id = id
       js.src = <span class="string">"//connect.facebook.net/en_US/all.js"</span>
       fjs.parentNode.insertBefore(js, fjs)</code></pre>
</div>
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>TODO: Test this out</p>
<p>Pass an array of scope permissions and a function to call once those permissions
have been granted.</p>

            </div>
            <div class="content"><pre><code class="lang-coffeescript">  requiringPermissions: (scopes, fn) -&gt;
    <span class="function"><span class="title">wrapped</span></span> = (fn) -&gt;
      ({authResponse}) -&gt;
        fn(authResponse)

    FB.getLoginStatus ({status, authResponse}) -&gt;
      <span class="keyword">if</span> status <span class="keyword">is</span> <span class="string">'connected'</span>
        FB.api <span class="string">'/me/permissions'</span>, ({data:[permissions]}) -&gt;

          permissionsToPrompt = scopes.filter (permission) -&gt;
            !permissions[permission]

          <span class="keyword">if</span> permissionsToPrompt.length
            FB.login wrapped(fn),
              scope: permissionsToPrompt.join(<span class="string">','</span>)
          <span class="keyword">else</span>
            fn(authResponse)
      <span class="keyword">else</span> <span class="keyword">if</span> status <span class="keyword">is</span> <span class="string">'not_authorized'</span>
        FB.login wrapped(fn),
          scope: scope
      <span class="keyword">else</span>
        FB.login wrapped(fn),
          scope: scope</code></pre>
</div>
        </li>
        
    </ul>
  </div>
  <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.3/coffee-script.min.js"></script>
<script src="http://strd6.github.io/require/v0.2.2.js"></script>
<script src="http://strd6.github.io/require/v0.2.2.js?"></script><script>
  $.ajax({
    url: "http://strd6.github.io/interactive/v0.8.1.jsonp",
    dataType: "jsonp",
    jsonpCallback: "STRd6/interactive:v0.8.1",
    cache: true
  }).then(function(PACKAGE) {
    Require.generateFor(PACKAGE)("./" + PACKAGE.entryPoint)
  })
</script><script src="package.js"></script>
</body>
</html>